//"use client";
import 'bootstrap/dist/css/bootstrap.min.css';
import Styles from './globals.css';
import Link from 'next/link'
import { Controls } from './Controls';
//import { useState } from 'react';

export const metadata = {
  title: "Web Tutorials",
  description: "Generated by Green",
};

export default async function RootLayout({ children }) {
  console.log('ê³µí†µ ë ˆì´ì•„ì›ƒ ì‘ë™');
  /* ì‚¬ìš©í•˜ë©´ metadata ì‚¬ìš© ì‹œ, ì˜¤ë¥˜ê°€ ë°œìƒí•œë‹¤. ê·¸ë˜ì„œ fetchë¬¸ë²•ìœ¼ë¡œ ë³€ê²½!!! ğŸ””
  const [topics, setTopics] = useState([]);
  
  useEffect(()=>{
    fetch('http://localhost:9999/topics/')
    .then(r=>r.json())
    .then(result=>{
      setTopics(result)
    });
  },[]);
  */
  const res = await fetch(`${process.env.NEXT_PUBLIC_API_URL}topics`,{ cache: 'no-store' }); //ì¡°íšŒ
  const topics = await res.json(); // json->objectì— ë‹´ê¸°ë©´ topicì— ë‹´ëŠ”ë‹¤
  
  return (
    <html lang="en">
      <body>
        <nav className="navbar bg-light">
          <div className="container">
            <Link href="/" className="navbar-brand">WEB</Link>
            <ul className="nav">
              {
              topics.map(item =>
                  <li key={item.id} className="nav-item">
                    <Link href={`/read/${item.id}`} className="nav-link">{item.title}</Link>
                  </li>
                )
              }
            </ul>
          </div>
        </nav>
        <main className="container my-3">
          {children}
          <hr/>
          <Controls/>
        </main>
      </body>
    </html>
  );
}
